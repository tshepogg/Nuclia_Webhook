# Use the official Python image from the Docker Hub
FROM python:3.9-slim

# Set the working directory in the container
WORKDIR /app

# Copy the requirements file into the container
COPY requirements.txt .

# Install the dependencies
RUN pip install --no-cache-dir -r requirements.txt

# Copy the rest of the application code into the container
COPY . .

# Set environment variables for API key and Knowledge Box ID
ENV NUCLIA_API_KEY="eyJhbGciOiJSUzI1NiIsImtpZCI6InNhIiwidHlwIjoiSldUIn0.eyJpc3MiOiJodHRwczovL2V1cm9wZS0xLm51Y2xpYS5jbG91ZC8iLCJpYXQiOjE3MzE0MDcyNzAsInN1YiI6IjdiOTZkZDlkLTA5NjktNDAxNC1hN2IxLTBkYjBkZmZjYTI2YiIsImp0aSI6IjhkZDRlNDg4LTcxNjUtNDk1OC1hZWFmLTNjOGFjZmQ4ZWY2YiIsImV4cCI6MTc2Mjk0MzI3MCwia2V5IjoiYTMxZGZjYTUtYTgzMy00MmQxLTg5NmQtYTAwMWQyNzJiNmNiIiwia2lkIjoiMjc1MjgyYzUtOGNkOS00NjRmLWE2MzktYWViYjI2ZDFjNjhlIn0.hhov_IJBpO-9aX0smlwbEwJzEjTsN-4biqEFw9X4HeCo9ihg_TNNDQc3mOF7dNg5P5qhCHgJYeNASPWbc8Fq62SFMmU5ckgn3_PRubSZ_pt6Rzdyh523IhkOX1a9Fp1mB2vYzqQRdnLrLo6XHEF5vgggUrulZi1W3IVSNZ7uklCwQPyLW_L7kS55wzUVogVoE61uqpriRDNM1wJSLO9p-0B2cxh6Z_i45WmQmePvG2Ucv2SsWcHS_pvFGmi9nCK2O5CUQ07NRvMmAELrQgcWA_WotjCQ2W2tkerOGJC2FlnkBxMiXIbExy-AI4iSPQ_OjeHIpB2IS9YxuCLzYWHY4sndD0WbDz6cZbPRwps64Y9OGdRUWDxnGIvdEURdQbQ89p_QQj_s3DtwdreY3VTw4WGBPoEusw-yjZLOqlgAcFqaPlKeocD0BOHKDAIebuwKKXkmEwD0PLg_kEmbrUYpGtwtIarjPxs7fkAIwSQ5PyDzpfBKAqRpPt7s7AmwHwC828dXL5sz6hrV9aMvR3N576YYOFeTdzWWIxeqGR8QQz6keDQcuvcFWy09q7VgTYgZOZ4pSdVcfaHBivVITF_OmuVYAUtjtxcJYaHU2K3n99OkSnQmfBpBY_Cj8T4p87Wqga0_oS8MTJIQZu0RUEZKagsmFmjHrCt4ztzC7pfzel8"

ENV NUCLIA_KB_ID="903a0322-3d77-4ec3-94fd-3a10021c9500"

# Run the application
CMD ["python", "app.py"]
